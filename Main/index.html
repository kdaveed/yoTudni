<!DOCTYPE html>
<html lang="en-US">

<head>

<link rel="stylesheet" href="../CSS/main.css" type="text/css">
<script src="../JS/subjectData.js"></script>
<script src="../JS/mosaikDescriptor.js"></script>
<script src="/Library/WebDesign/jquery.js"></script>
<script src="/Users/konkolydavid/Webdesign/Angular/angular.min.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.5/angular-animate.js"></script>
<script src="../JS/util.js"></script>
</head>

<body ng-app="myApp">

	<!-- Template -->
	<script type="text/ng-template" id="mosaik.html">
		<div class="secondary sample-show-hide" ng-hide="!$ctrl.subject.shown" ng-class="{'expanded' : $ctrl.expand }" 
			style="	background-color : {{$ctrl.subject.color}};
					left : {{$ctrl.subject.coords.left}}px;
					top : {{$ctrl.subject.coords.top}}px;"
			ng-click="$ctrl.click($ctrl.subject)">
			<img src="../img/{{$ctrl.subject.imgName}}" class = "secondaryImage"> 
			<subject-description ng-hide="$ctrl.hideContent" subject-name='$ctrl.subject.name'></subject-description>
		</div>			
  </script>

	<script type="text/ng-template" id="mosaikList.html">
		<mosaik ng-repeat="subject in $ctrl.subjects" subject="subject" hide-elements="$ctrl.hideOnes(index)"></mosaik> 
	</script>

	<script type="text/ng-template" id="subjectDescription.html">
		<div ng-switch="$ctrl.subjectName" class="sample-show-hide subjectContent">
			<div ng-switch-when="matek"> <math-description></math-description></div>
			<div ng-switch-default> <general-description></general-description></div>
		</div> 	
  </script>

	<script type="text/ng-template" id="mathDescription.html">
		Math is great.
  </script>

	<script type="text/ng-template" id="generalDescription.html">
		Others are great as well.
  </script>

	<div ng-controller="simpleController" class="mosaikContainer">
		<mosaik-list subjects="subjectList"></mosaik-list>
	</div>
	<script>
		var app = angular.module("myApp", [ "ngAnimate" ])
		app.controller("simpleController", function($scope) {

			$scope.subjectState = 1
			$scope.secondState = function() {
				$scope.subjectState = 2
			}
			$scope.current = "matek"
			$scope.subjects = subjectData
			$scope.subjectList = calculateCoords(subjectList, Mosaik.config)
			console.log("SubjectList")
			console.log($scope.subjectList)
		});

		var MosaikListController = function($scope, $element, $attrs) {

			this.hideOnes = function(index) {

				util.setValues(this.subjects, "shown", false, {
					inverse : true,
					key : "index",
					value : index
				})
				console.log(this.subjects)
			}
		}

		app.component("mosaikList", {

			controller : MosaikListController,
			templateUrl : "mosaikList.html",
			bindings : {
				subjects : "<"
			}
		})

		function MosaikController($scope, $element, $attrs) {

			//var ctrl = this
			this.hideContent = true
			this.expand = false
			this.click = function(value) {
				this.hideContent = false
				this.expand = true
				this.subject.coords.left = 10;
				this.subject.coords.top = 10;
				this.hideElements({
					index : this.subject.index
				})
			}
		}
		
		app.component("mosaik", {
			//restrict : 'E',
			controller : MosaikController,
			bindings : {
				subject : "<",
				hideElements : "&"
			},
			templateUrl : 'mosaik.html'
		})

		app.component("subjectDescription", {
			//controller : SubjectDescriptionController,
			bindings : {
				subjectName : "<",
			},
			templateUrl : "subjectDescription.html"
		})

		app.component("mathDescription", {
			bindings : {
				subjectName : "<",
			},
			templateUrl : "mathDescription.html"
		})

		app.component("generalDescription", {
			bindings : {
				subjectName : "<",
			},
			templateUrl : "generalDescription.html"
		})
	</script>
</body>
</html>





